<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <title>Collector â€“ Sistema</title>
        <style>
         :root {
         --bg: #0b1220;
         --sidebar: #0f172a;
         --card: #163a88;
         --primary: #3b82f6;
         --success: #22c55e;
         --text: #e5e7eb;
         --muted: #9ca3af;
         }
         .light {
         --bg: #f4f6fb;
         --sidebar: #ffffff;
         --card: #ffffff;
         --primary: #2563eb;
         --text: #111827;
         --muted: #6b7280;
         }
         * {
         margin: 0;
         padding: 0;
         box-sizing: border-box;
         }
         body {
         font-family: Inter, Arial, sans-serif;
         background: var(--bg);
         color: var(--text);
         display: flex;
         height: 100vh;
         transition: background 0.3s, color 0.3s;
         }
         /* Sidebar */
         .sidebar {
         width: 260px;
         background: var(--sidebar);
         padding: 25px;
         transition: width 0.3s;
         }
         .sidebar.collapsed {
         width: 80px;
         }
         .sidebar h1 {
         font-size: 1.3rem;
         color: var(--primary);
         margin-bottom: 30px;
         }
         .sidebar.collapsed h1 {
         display: none;
         }
         .sidebar a {
         display: block;
         padding: 12px;
         margin-bottom: 10px;
         border-radius: 8px;
         text-decoration: none;
         color: var(--text);
         white-space: nowrap;
         cursor: pointer;
         user-select: none;
         }
         .sidebar a:hover {
         background: var(--card);
         }
         /* Main */
         .main {
         flex: 1;
         padding: 30px;
         overflow-y: auto;
         }
         /* Top bar */
         .topbar {
         display: flex;
         justify-content: space-between;
         align-items: center;
         margin-bottom: 20px;
         }
         .breadcrumb {
         color: var(--muted);
         font-size: 0.9rem;
         }
         .controls button {
         background: var(--card);
         border: none;
         padding: 10px 14px;
         border-radius: 8px;
         color: var(--text);
         cursor: pointer;
         margin-left: 10px;
         }
         /* Header */
         .header h2 {
         font-size: 1.8rem;
         }
         .header p {
         color: var(--muted);
         margin-bottom: 25px;
         }
         /* Cards */
         .cards {
         display: grid;
         grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
         gap: 20px;
         margin-bottom: 30px;
         }
         .card {
         background: var(--card);
         border-radius: 14px;
         padding: 20px;
         animation: fadeUp 0.4s ease;
         }
         .card span {
         color: var(--muted);
         font-size: 0.85rem;
         }
         .card h3 {
         margin-top: 10px;
         font-size: 1.4rem;
         }
         .status-ok {
         color: var(--success);
         }
         /* Sections */
         .section {
         background: var(--card);
         border-radius: 14px;
         padding: 25px;
         margin-bottom: 25px;
         animation: fadeUp 0.4s ease;
         }
         .section h3 {
         color: var(--primary);
         margin-bottom: 12px;
         }
         .section ul {
         padding-left: 20px;
         }
         .section li {
         margin-bottom: 8px;
         }
         code {
         background: #020617;
         padding: 10px 12px;
         border-radius: 8px;
         display: inline-block;
         margin-top: 10px;
         color: #60a5fa;
         }
         /* Footer */
         .footer {
         text-align: center;
         margin-top: 40px;
         color: var(--muted);
         font-size: 0.85rem;
         }
         /* Animations */
         @keyframes fadeUp {
         from {
         opacity: 0;
         transform: translateY(10px);
         }
         to {
         opacity: 1;
         transform: translateY(0);
         }
         }
         /*---------------------------------------------------------------*/
         /* GALERIA */
         .galeria {
         padding: 20px;
         display: grid;
         grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
         gap: 15px;
         }
         .filme {
         background-color: #1c1c1c;
         border-radius: 3px;
         overflow: hidden;
         text-align: center;
         cursor: pointer;
         transition: transform 0.2s;
         }
         .filme:hover {
         transform: scale(1.05);
         }
         .filme img {
         width: 100%;
         height: 150px;
         object-fit: cover;
         display: block;
         }
         .filme span {
         display: block;
         padding: 6px;
         font-size: 14px;
         }
         /*****************************************************************************************/
          /* TOPO */
    .topo {
      background-color: #1c1c1c;
      padding: 15px;
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
      border-bottom: 2px solid #333;
    }

    .topo input,
    .topo select {
      padding: 8px;
      border: none;
      border-radius: 4px;
      background-color: #2b2b2b;
      color: #fff;
    }

    .botoes {
      display: flex;
      gap: 10px;
      margin-top: 5px;
    }

    .botoes button {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }

    .btn-criar {
      background-color: rgb(60, 113, 245);
      color: #fff;
      cursor: pointer;
    }

    .btn-salvar {
      background-color: #2e7d32;
      color: #fff;
    }

    .btn-apagar {
      background-color: #b71c1c;
      color: rgb(254, 254, 254);
    }

    .botoes button:hover {
      opacity: 0.85;
    }

         /*Dev*/
    table,td,td,th{
      border: 1px solid white;
      font-size: 15px;
    }
    table{
      width: 100%;
    }
    textarea {
      width: 90%;
      border-radius: 3px;
      background-color: #666;
      height: 90vh;
      color: #eee;
    }
    table a{
        color: yellow;
    }
     
    
         /*****************************************************************************************/
        </style>
    </head>

    <script>
        const script = document.createElement("script");
        script.src = "libV2.js?v=" + new Date().getTime();
        document.head.appendChild(script);
       </script>


    <body>
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <a href="dash.html"><h1>Collector</h1></a>
            <a onclick="exibirAba('Cadastro');limparcampos();">Cadastro de Midias</a>
            <a onclick="exibirAba('FilmesDVD')">Filmes DVD</a>
            <a onclick="exibirAba('FilmesVHS')">Filmes VHS</a>
            <a onclick="exibirAba('Administrador')">Administrador</a> 
            <a onclick="exibirAba('PainelErros')" id="painelDeErrosLABEL">Painel de Erros</a> 
        </div>
        <script>
            function limparcampos(){
                document.getElementById('Observacoes').value=""
                document.getElementById('Capa').value=""
                document.getElementById('Nome').value=""
                document.getElementById('Categoria').value=""
            }
        </script>

        <!-- Main -->
        <div class="main">
            <div class="topbar">
                <div class="breadcrumb">
                    Home / Filmes / Sistema Collector
                </div>
                <div class="controls">
                    <!--<button onclick="toggleTheme()">ðŸŒ—</button>-->
                </div>
            </div>
            <div class="header">
                <h2>Dashboard</h2>
                <p></p>
            </div>
            <!-- Cards -->
            <div class="cards">
                <div class="card">
                    <span>Total de Filmes</span>
                    <h3 id="totaldefilmes">0</h3>
                </div>
                <div class="card">
                    <span>Filmes em DVD</span>
                    <h3 id="numeroDeFilmesDVD">0</h3>
                </div>
                <div class="card">
                    <span>Filmes em VHS</span>
                    <h3 id="numeroDeFilmesVHS">0</h3>
                </div>
                <div class="card">
                    <span>Midias incompletas</span>
                    <h3 id="outrasMidiasIncompletas">0</h3>
                </div>
            </div>


















            <!------------------------------------------------------------------------------->
            <section id="FilmesVHS" class="section">
                <center>
                    <h2>VHS</h2>
                    <div class="topo">
                        <input id="BuscaVHS" type="text" placeholder="Buscar filme">

                        <select id="CategoriaVHS">
                            <!--<option>DVD - Apenas Midia Digital</option>
                            <option>DVD - ISO Pronto</option>
                            <option>DVD - Midia Fisica Sem Nada</option>
                            <option>DVD - Midia Fisica Com Capa</option>
                            <option>DVD - Midia Fisica Completa</option>-->
                            <option>VHS - Fita sem estojo</option>
                            <option>VHS - Fita com Estojo e Sem Encarte</option>
                            <option>VHS - Fita Completa</option>
                            <option>VHS - Fita Mofada</option>
                        </select>

                    </div>
                </center>
                <div id="galeriaVHS" class="galeria"></div>
            </section>
            <script>
                const BuscaVHS = document.getElementById('BuscaVHS') 
                const CategoriaVHS = document.getElementById('CategoriaVHS') 
                
                BuscaVHS.addEventListener('input', () => {  
                    reloadCapas(BuscaVHS.value)
                    
                }) 
                CategoriaVHS.addEventListener('input', () => {  
                    reloadCapas(BuscaVHS.value,CategoriaVHS.value)
                    
                })
            </script>
























            <!------------------------------------------------------------------------------->
            <section id="FilmesDVD" class="section">
                <center>
                    <h2>DVD</h2>
                    <div class="topo">
                        <input id="BuscaDVD" type="text" placeholder="Buscar filme">

                        <select id="CategoriaDVD">
                            <option>DVD - Apenas Midia Digital</option>
                            <option>DVD - ISO Pronto</option>
                            <option>DVD - Midia Fisica Sem Nada</option>
                            <option>DVD - Midia Fisica Com Capa</option>
                            <option>DVD - Midia Fisica Completa</option>
                            <!--<option>VHS - Fita sem estojo</option>
                            <option>VHS - Fita com Estojo e Sem Encarte</option>
                            <option>VHS - Fita Completa</option>
                            <option>VHS - Fita Mofada</option>-->
                        </select>
                    </div>
                </center>
                <div id="galeriaDVD" class="galeria"></div>
            </section>
            <script>
                const BuscaDVD = document.getElementById('BuscaDVD') 
                const CategoriaDVD = document.getElementById('CategoriaDVD') 

                BuscaDVD.addEventListener('input', () => {
                    
                    reloadCapas(BuscaDVD.value)

                })
                CategoriaDVD.addEventListener('input', () => {
                    
                    reloadCapas(BuscaDVD.value,CategoriaDVD.value)

                })
            </script>





















            <!------------------------------------------------------------------------------->
            <section id="Cadastro" class="section">
                <div class="topo">

                   
                    <input id="Nome" type="text" placeholder="Nome do filme">
                    <input id="Capa" type="text" placeholder="Capa do filme">
                    <select id="Categoria">
                        <option>DVD - Apenas Midia Digital</option>
                        <option>DVD - ISO Pronto</option>
                        <option>DVD - Midia Fisica Sem Nada</option>
                        <option>DVD - Midia Fisica Com Capa</option>
                        <option>DVD - Midia Fisica Completa</option>
                        <option>VHS - Fita sem estojo</option>
                        <option>VHS - Fita com Estojo e Sem Encarte</option>
                        <option>VHS - Fita Completa</option>
                        <option>VHS - Fita Mofada</option>
                    </select>
                    <input id="Observacoes" type="text" placeholder="ObservaÃ§Ãµes">
                    <div class="botoes">
                        <button id="Criar" class="btn-criar">Criar</button>
                        <button id="Salvar" class="btn-salvar">Salvar</button>
                        <button id="Apagar" class="btn-apagar">Apagar</button>
                    </div>

                    <center>
                        <img style="width: 25%;" id="imgPreview" src="" alt="">
                    
                    </center>
                </div>
            </section>
            <script>
                
                const btCriar = document.getElementById('Criar')
                const btSalvar = document.getElementById('Salvar')
                const btApagar = document.getElementById('Apagar')

                const Capa = document.getElementById('Capa')
                const imgPreview = document.getElementById('imgPreview')
                
                Capa.addEventListener('input', () => {
                    imgPreview.src = Capa.value
                })  
                


                btCriar.addEventListener('click', () => {

                        const Observacoes = document.getElementById('Observacoes').value
                        const Capadofilme = document.getElementById('Capa').value
                        const Nomedofilme = document.getElementById('Nome').value
                        const Categoria = document.getElementById('Categoria').value



                        SQL_setItem(Nomedofilme, Capadofilme + '|' + Observacoes + '|' + Categoria)
                        addCapa(Nomedofilme, Capadofilme + '|' + Observacoes + '|' + Categoria)


                        setTimeout(() => {
                            document.getElementById('Observacoes').value=""
                            document.getElementById('Capa').value=""
                            document.getElementById('Nome').value=""
                            document.getElementById('Categoria').value=""
                        }, 3000);
                })

                btApagar.addEventListener('click', () => {
                    const Nomedofilme = document.getElementById('Nome').value
                    SQL_delete(Nomedofilme)
                    reloadCapas()
                })  

                btSalvar.addEventListener('click', () => {

                    const Observacoes = document.getElementById('Observacoes').value
                    const Capadofilme = document.getElementById('Capa').value
                    const Nomedofilme = document.getElementById('Nome').value
                    const Categoria = document.getElementById('Categoria').value


                    SQL_updateItem(Nomedofilme, Capadofilme + '|' + Observacoes + '|' + Categoria)

                    //addCapa(Nomedofilme + '|' + Capadofilme + '|' + Observacoes + '|' + Categoria)


                })

            </script>






















            <!------------------------------------------------------------------------------->
            <section id="Administrador" class="section">
                <center>
                    
                    <br>
                    <br>
                    <p id="rangeParagrafo"></p>
                    <br>
                    <br>

                    <button id="evalDEV" class="btn-criar" style="border:none;padding:10px;border-radius: 5px;">Executar Codigo</button>
                    <button id="obterDB" class="btn-criar" style="border:none;padding:10px;border-radius: 5px;">Obter DB</button>
                    <button id="copiarDB" class="btn-criar" style="border:none;padding:10px;border-radius: 5px;">Copiar codigo</button>
                    <br>
                    <br>
                    <button id="gerarPlanilha" class="btn-criar"    style="border:none;padding:10px;border-radius: 5px;">Gerar Planilha Completa</button>
                    <button id="gerarPlanilhaDVD" class="btn-criar" style="border:none;padding:10px;border-radius: 5px;">Gerar Planilha DVD</button>
                    <button id="gerarPlanilhaVHS" class="btn-criar" style="border:none;padding:10px;border-radius: 5px;">Gerar Planilha VHS</button>
                    <br>
                    <br>
                    <button id="apagarDB" class="btn-criar" style="border:none;padding:10px;border-radius: 5px;background-color: red;">Apagar Banco de Dados</button>
                    <br><br>
                    <div id="areaAdministrador">
                        
                    </div>
                    <textarea
                        name=""
                        id="devTextarea"
                        cols="30"
                        rows="10"
                    ></textarea>
                    <br>
                </center>
            </section>
            <style>
                b{
                    color: #61be3e;
                }
                .tabelaMenor{
                    width: 50%;
                    text-align: center  ;
                }
                .tabelaMenor td{
                    padding: 5px;
                }
            </style>
            <script>

                setTimeout(() => {  
                    const rangeParagrafo = document.getElementById('rangeParagrafo')

                    //-----------------------------------------------
                    var porcentagem = (estimateusage / estimateQuota) * 100

                    console.log('------------------');
                    console.log(estimateQuota / 1000000000);
                    console.log();
                    //------------------------------------------------



                    rangeParagrafo.innerHTML = `
                    <table class="tabelaMenor">
                        <tr>
                            <th colspan="2">InformaÃ§Ãµes do IndexedDB</th>
                        </tr>
                        <tr>
                            <td>Usado</td>
                            <td><b>${estimateusage}</b></td>
                        </tr>
                        <tr>
                            <td>MÃ¡ximo</td>
                            <td><b>${estimateQuota}</b></td>
                        </tr>
                        <tr>
                            <td>Porcentagem de Armazenamento usado</td>
                            <td><b>${(porcentagem * 100).toFixed(2) + "%"}</b></td>
                        </tr>
                    
                    </table>    
                    `
                }, 3000);

                document.getElementById('obterDB').addEventListener('click',()=>{
                    document.getElementById('areaAdministrador').style.display = 'none'
                    document.getElementById('devTextarea').style.display = 'block'
                    SQL_getAllItens() 
                }) 
                
                document.getElementById('copiarDB').addEventListener('click',()=>{
                    const textarea = document.getElementById("devTextarea");
  
                    navigator.clipboard.writeText(textarea.value)
                    .then(() => {
                      console.log("Texto copiado!");
                    })
                    .catch(err => {
                      console.error("Erro ao copiar:", err);
                    });
                })

                document.getElementById('gerarPlanilhaVHS').addEventListener('click',()=>{
                    document.getElementById('areaAdministrador').style.display = 'block'
                    document.getElementById('devTextarea').style.display = 'none'
                    SQL_gerarPlanilha('VHS') 
                })

                document.getElementById('gerarPlanilha').addEventListener('click',()=>{
                    document.getElementById('areaAdministrador').style.display = 'block'
                    document.getElementById('devTextarea').style.display = 'none'
                    SQL_gerarPlanilha() 
                })

                document.getElementById('gerarPlanilhaDVD').addEventListener('click',()=>{
                    document.getElementById('areaAdministrador').style.display = 'block'
                    document.getElementById('devTextarea').style.display = 'none'
                    SQL_gerarPlanilha('DVD') 
                })

                document.getElementById('evalDEV').addEventListener('click',()=>{
                    try {
                        document.getElementById('areaAdministrador').style.display = 'none'
                        document.getElementById('devTextarea').style.display = 'block'
                        eval(document.getElementById('devTextarea').value)
                        setTimeout(() => {
                            window.location.reload()
                        }, 3000);
                    } catch (error) {
                    
                    }
                })
                document.getElementById('apagarDB').addEventListener('click',()=>{
                    try {
                        SQL_deleteAll();
                        setTimeout(() => {
                            window.location.reload()
                        }, 3000);
                    } catch (error) {
                    
                    }
                })

            </script>


<!------------------------------------------------------------------------------->
            <style>
                #fixxxx{
                    padding: 10px;
                    border-radius: 5px;
                    background-color: #2e7d32;
                    border: none;
                    cursor: pointer;
                }
            </style>
            <section id="PainelErros" class="section">
                <div id="erro" style="display:none">
                    <h2>Codigo pra corrigir um erro encontrado:</h2>
                    <br>
                    <center>
                        <button id="fixxxx" class="btn-criar">Executar correcao</button>
                    </center>
                    <br>
                    <br>
                    <textarea
                        name=""
                        id="erroT"
                        cols="30"
                        rows="10"
                    ></textarea>
                    <br>
                </div>
            </section>
            <script>
            
                const fixxxx = document.getElementById('fixxxx')
                fixxxx.addEventListener('click', () => {
                
                    try {
                        eval(document.getElementById('erroT').value)
                        alert('Correcao aplicada com sucesso.\nAguarde que vou recarregar tudo!!')
                        setTimeout(() => {
                            window.location.reload()
                        }, 3000);
                    } catch (error) {
                        alert(error)
                    }
                })
            
            </script>
            
            
            
            
            
            
            
            
            
            
            
            
            
            







            <!------------------------------------------------------------------------------->
            <div class="footer">
                Â© 2025 â€“ Collector by BresoDEV
            </div>
        </div>
     
        <script>
         //-----------abas
         
         const sessoes = [
             'Cadastro',
             'FilmesVHS', 
             'FilmesDVD', 
             'Administrador', 
             'PainelErros', 
         ]
         
         esconderTodasAbas()
         
         function esconderTodasAbas(){
             sessoes.forEach(i => {
             document.getElementById(i).style.display = 'none'
         });
         }
         
         function exibirAba(abaID){
             esconderTodasAbas()
             document.getElementById(abaID).style.display = 'block'

             //zera todos inputs
             document.getElementById('BuscaVHS').value = "" 
             document.getElementById('BuscaDVD').value = "" 

             reloadCapas()
         }
          
         
         
         
         
         
         
         function toggleTheme() {
             document.body.classList.toggle("light");
         }
         
         function toggleSidebar() {
             document.getElementById("sidebar").classList.toggle("collapsed");
         }
        </script>
    </body>
</html>
